{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ap75r\\\\OneDrive\\\\Desktop\\\\Proj\\\\sepm project\\\\client\\\\src\\\\contexts\\\\ProgressContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useState, useEffect } from 'react';\nimport { useAuth } from './AuthContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ProgressContext = /*#__PURE__*/createContext();\nexport function useProgress() {\n  _s();\n  return useContext(ProgressContext);\n}\n_s(useProgress, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nexport function ProgressProvider({\n  children\n}) {\n  _s2();\n  const {\n    currentUser\n  } = useAuth();\n  const [userProgress, setUserProgress] = useState({\n    modulesCompleted: 0,\n    completedModules: [],\n    quizzesTaken: 0,\n    averageScore: 0,\n    totalPoints: 0,\n    totalTimeSpent: 0,\n    badges: [],\n    recentActivities: []\n  });\n\n  // Reset progress\n  const resetProgress = () => {\n    setUserProgress({\n      modulesCompleted: 0,\n      completedModules: [],\n      quizzesTaken: 0,\n      averageScore: 0,\n      totalPoints: 0,\n      totalTimeSpent: 0,\n      badges: [],\n      recentActivities: []\n    });\n    // Also clear localStorage when resetting\n    if (currentUser) {\n      localStorage.removeItem(`progress_${currentUser.uid}`);\n    }\n  };\n\n  // Update modules completed\n  const updateModulesCompleted = moduleId => {\n    setUserProgress(prev => {\n      const completedModules = prev.completedModules || [];\n      if (!completedModules.includes(moduleId)) {\n        completedModules.push(moduleId);\n      }\n      return {\n        ...prev,\n        completedModules,\n        modulesCompleted: completedModules.length\n      };\n    });\n  };\n\n  // Update time spent\n  const updateTimeSpent = additionalSeconds => {\n    if (!additionalSeconds || additionalSeconds <= 0) return;\n    setUserProgress(prev => {\n      const newTotalTime = (prev.totalTimeSpent || 0) + additionalSeconds;\n      return {\n        ...prev,\n        totalTimeSpent: newTotalTime\n      };\n    });\n  };\n\n  // Format time for display\n  const formatTimeSpent = totalSeconds => {\n    if (!totalSeconds) return '0m';\n    const hours = Math.floor(totalSeconds / 3600);\n    const minutes = Math.floor(totalSeconds % 3600 / 60);\n    if (hours > 0) {\n      return `${hours}h ${minutes}m`;\n    }\n    return `${minutes}m`;\n  };\n\n  // Update quiz statistics\n  const updateQuizStats = score => {\n    setUserProgress(prev => {\n      const newQuizCount = prev.quizzesTaken + 1;\n      const newAverageScore = Math.round((prev.averageScore * prev.quizzesTaken + score) / newQuizCount);\n      return {\n        ...prev,\n        quizzesTaken: newQuizCount,\n        averageScore: newAverageScore\n      };\n    });\n    addActivity({\n      type: 'quiz_completed',\n      title: 'Quiz',\n      score: score,\n      timestamp: new Date()\n    });\n  };\n\n  // Add points\n  const addPoints = points => {\n    setUserProgress(prev => ({\n      ...prev,\n      totalPoints: prev.totalPoints + points\n    }));\n  };\n\n  // Add badge\n  const addBadge = badge => {\n    setUserProgress(prev => ({\n      ...prev,\n      badges: [...prev.badges, badge]\n    }));\n    addActivity({\n      type: 'badge_earned',\n      title: badge.name,\n      timestamp: new Date()\n    });\n  };\n\n  // Add activity\n  const addActivity = activity => {\n    if (activity.type === 'learning_time') {\n      const timeString = formatTimeSpent(activity.timeSpent);\n      activity.title = `Spent ${timeString} learning`;\n    }\n    setUserProgress(prev => ({\n      ...prev,\n      recentActivities: [activity, ...prev.recentActivities].slice(0, 10) // Increased to show more activities\n    }));\n  };\n\n  // Load progress from localStorage when component mounts or user changes\n  useEffect(() => {\n    if (currentUser) {\n      try {\n        const savedProgress = localStorage.getItem(`progress_${currentUser.uid}`);\n        if (savedProgress) {\n          const parsed = JSON.parse(savedProgress);\n          // Ensure all required fields exist\n          setUserProgress({\n            modulesCompleted: parsed.modulesCompleted || 0,\n            completedModules: parsed.completedModules || [],\n            quizzesTaken: parsed.quizzesTaken || 0,\n            averageScore: parsed.averageScore || 0,\n            totalPoints: parsed.totalPoints || 0,\n            totalTimeSpent: parsed.totalTimeSpent || 0,\n            badges: parsed.badges || [],\n            recentActivities: parsed.recentActivities || []\n          });\n        }\n      } catch (error) {\n        console.error('Error loading progress:', error);\n        // If there's an error, reset to default state\n        resetProgress();\n      }\n    }\n  }, [currentUser]);\n\n  // Save progress to localStorage whenever it changes\n  useEffect(() => {\n    if (currentUser) {\n      localStorage.setItem(`progress_${currentUser.uid}`, JSON.stringify(userProgress));\n    }\n  }, [userProgress, currentUser]);\n  const value = {\n    userProgress,\n    resetProgress,\n    updateModulesCompleted,\n    updateQuizStats,\n    addPoints,\n    addBadge,\n    addActivity,\n    updateTimeSpent,\n    formatTimeSpent\n  };\n  return /*#__PURE__*/_jsxDEV(ProgressContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 184,\n    columnNumber: 5\n  }, this);\n}\n_s2(ProgressProvider, \"+OvRRmF7Ug2eafsY8fH4OBniomg=\", false, function () {\n  return [useAuth];\n});\n_c = ProgressProvider;\nvar _c;\n$RefreshReg$(_c, \"ProgressProvider\");","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","useAuth","jsxDEV","_jsxDEV","ProgressContext","useProgress","_s","ProgressProvider","children","_s2","currentUser","userProgress","setUserProgress","modulesCompleted","completedModules","quizzesTaken","averageScore","totalPoints","totalTimeSpent","badges","recentActivities","resetProgress","localStorage","removeItem","uid","updateModulesCompleted","moduleId","prev","includes","push","length","updateTimeSpent","additionalSeconds","newTotalTime","formatTimeSpent","totalSeconds","hours","Math","floor","minutes","updateQuizStats","score","newQuizCount","newAverageScore","round","addActivity","type","title","timestamp","Date","addPoints","points","addBadge","badge","name","activity","timeString","timeSpent","slice","savedProgress","getItem","parsed","JSON","parse","error","console","setItem","stringify","value","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/ap75r/OneDrive/Desktop/Proj/sepm project/client/src/contexts/ProgressContext.js"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect } from 'react';\r\nimport { useAuth } from './AuthContext';\r\n\r\nconst ProgressContext = createContext();\r\n\r\nexport function useProgress() {\r\n  return useContext(ProgressContext);\r\n}\r\n\r\nexport function ProgressProvider({ children }) {\r\n  const { currentUser } = useAuth();\r\n  const [userProgress, setUserProgress] = useState({\r\n    modulesCompleted: 0,\r\n    completedModules: [],\r\n    quizzesTaken: 0,\r\n    averageScore: 0,\r\n    totalPoints: 0,\r\n    totalTimeSpent: 0,\r\n    badges: [],\r\n    recentActivities: []\r\n  });\r\n\r\n  // Reset progress\r\n  const resetProgress = () => {\r\n    setUserProgress({\r\n      modulesCompleted: 0,\r\n      completedModules: [],\r\n      quizzesTaken: 0,\r\n      averageScore: 0,\r\n      totalPoints: 0,\r\n      totalTimeSpent: 0,\r\n      badges: [],\r\n      recentActivities: []\r\n    });\r\n    // Also clear localStorage when resetting\r\n    if (currentUser) {\r\n      localStorage.removeItem(`progress_${currentUser.uid}`);\r\n    }\r\n  };\r\n\r\n  // Update modules completed\r\n  const updateModulesCompleted = (moduleId) => {\r\n    setUserProgress(prev => {\r\n      const completedModules = prev.completedModules || [];\r\n      if (!completedModules.includes(moduleId)) {\r\n        completedModules.push(moduleId);\r\n      }\r\n      return {\r\n        ...prev,\r\n        completedModules,\r\n        modulesCompleted: completedModules.length\r\n      };\r\n    });\r\n  };\r\n\r\n  // Update time spent\r\n  const updateTimeSpent = (additionalSeconds) => {\r\n    if (!additionalSeconds || additionalSeconds <= 0) return;\r\n    \r\n    setUserProgress(prev => {\r\n      const newTotalTime = (prev.totalTimeSpent || 0) + additionalSeconds;\r\n      return {\r\n        ...prev,\r\n        totalTimeSpent: newTotalTime\r\n      };\r\n    });\r\n  };\r\n\r\n  // Format time for display\r\n  const formatTimeSpent = (totalSeconds) => {\r\n    if (!totalSeconds) return '0m';\r\n    \r\n    const hours = Math.floor(totalSeconds / 3600);\r\n    const minutes = Math.floor((totalSeconds % 3600) / 60);\r\n    \r\n    if (hours > 0) {\r\n      return `${hours}h ${minutes}m`;\r\n    }\r\n    return `${minutes}m`;\r\n  };\r\n\r\n  // Update quiz statistics\r\n  const updateQuizStats = (score) => {\r\n    setUserProgress(prev => {\r\n      const newQuizCount = prev.quizzesTaken + 1;\r\n      const newAverageScore = Math.round(\r\n        ((prev.averageScore * prev.quizzesTaken) + score) / newQuizCount\r\n      );\r\n      return {\r\n        ...prev,\r\n        quizzesTaken: newQuizCount,\r\n        averageScore: newAverageScore\r\n      };\r\n    });\r\n    addActivity({\r\n      type: 'quiz_completed',\r\n      title: 'Quiz',\r\n      score: score,\r\n      timestamp: new Date()\r\n    });\r\n  };\r\n\r\n  // Add points\r\n  const addPoints = (points) => {\r\n    setUserProgress(prev => ({\r\n      ...prev,\r\n      totalPoints: prev.totalPoints + points\r\n    }));\r\n  };\r\n\r\n  // Add badge\r\n  const addBadge = (badge) => {\r\n    setUserProgress(prev => ({\r\n      ...prev,\r\n      badges: [...prev.badges, badge]\r\n    }));\r\n    addActivity({\r\n      type: 'badge_earned',\r\n      title: badge.name,\r\n      timestamp: new Date()\r\n    });\r\n  };\r\n\r\n  // Add activity\r\n  const addActivity = (activity) => {\r\n    if (activity.type === 'learning_time') {\r\n      const timeString = formatTimeSpent(activity.timeSpent);\r\n      activity.title = `Spent ${timeString} learning`;\r\n    }\r\n    \r\n    setUserProgress(prev => ({\r\n      ...prev,\r\n      recentActivities: [activity, ...prev.recentActivities].slice(0, 10) // Increased to show more activities\r\n    }));\r\n  };\r\n\r\n  // Load progress from localStorage when component mounts or user changes\r\n  useEffect(() => {\r\n    if (currentUser) {\r\n      try {\r\n        const savedProgress = localStorage.getItem(`progress_${currentUser.uid}`);\r\n        if (savedProgress) {\r\n          const parsed = JSON.parse(savedProgress);\r\n          // Ensure all required fields exist\r\n          setUserProgress({\r\n            modulesCompleted: parsed.modulesCompleted || 0,\r\n            completedModules: parsed.completedModules || [],\r\n            quizzesTaken: parsed.quizzesTaken || 0,\r\n            averageScore: parsed.averageScore || 0,\r\n            totalPoints: parsed.totalPoints || 0,\r\n            totalTimeSpent: parsed.totalTimeSpent || 0,\r\n            badges: parsed.badges || [],\r\n            recentActivities: parsed.recentActivities || []\r\n          });\r\n        }\r\n      } catch (error) {\r\n        console.error('Error loading progress:', error);\r\n        // If there's an error, reset to default state\r\n        resetProgress();\r\n      }\r\n    }\r\n  }, [currentUser]);\r\n\r\n  // Save progress to localStorage whenever it changes\r\n  useEffect(() => {\r\n    if (currentUser) {\r\n      localStorage.setItem(`progress_${currentUser.uid}`, JSON.stringify(userProgress));\r\n    }\r\n  }, [userProgress, currentUser]);\r\n\r\n  const value = {\r\n    userProgress,\r\n    resetProgress,\r\n    updateModulesCompleted,\r\n    updateQuizStats,\r\n    addPoints,\r\n    addBadge,\r\n    addActivity,\r\n    updateTimeSpent,\r\n    formatTimeSpent\r\n  };\r\n\r\n  return (\r\n    <ProgressContext.Provider value={value}>\r\n      {children}\r\n    </ProgressContext.Provider>\r\n  );\r\n} "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}